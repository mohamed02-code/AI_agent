{
  "perc": {
    "sys_instruct": "You are a clinical decision support assistant.\n",
    "enhanced_prompt": "Calculate the PERC score for this patient based on the 8 criteria below. Explain how each criterion applies using the patient note and extracted entities, then return the result in the specified JSON format.\n\nYour task is to calculate the PERC (Pulmonary Embolism Rule-out Criteria) score for a patient using the provided note and extracted entities.\n\nThere are 8 criteria. Each criterion is evaluated as either:\n - true: criterion met (meaning favorable condition, no risk factor present),\n - false: criterion not met (risk factor present).\nEach false criterion adds 1 point to the PERC score.\n\nPERC Criteria:\n1. Age < 50 years\n2. Heart rate < 100 beats per minute\n3. Oxygen saturation ≥ 95%\n4. No unilateral leg swelling\n5. No hemoptysis\n6. No recent trauma or surgery\n7. No history of deep vein thrombosis (DVT) or pulmonary embolism (PE)\n8. No hormone (estrogen) use\n\nIf data for any criterion is missing or not explicitly mentioned, assume the criterion is met (true).\n\nFirst, provide a detailed step-by-step explanation about how you evaluated each criterion based on the patient data.\n\nThen, provide the output JSON object exactly matching this format (with no extra text):\n\n{\n  \"Explanation\": \"<Concise summary explaining evaluation of each criterion>\",\n  \"Criteria\": {\n    \"Age < 50\": true or false,\n    \"HR < 100\": true or false,\n    \"O₂ ≥ 95%\": true or false,\n    \"No hemoptysis\": true or false,\n    \"No Hormone use\": true or false,\n    \"No prior VTE or DVT\": true or false,\n    \"No unilateral leg swelling\": true or false,\n    \"No recent trauma or surgery\": true or false\n  },\n  \"Answer\": <integer equal to the total number of false criteria (sum of false values)>\n}",
    "extract_entities": "Extract the following parameters from the patient note :\n\nOutput ONLY a JSON object containing the values for these parameters:\n- age (number)\n- heart_rate (number)\n- oxygen_saturation (number)\n- has_hemoptysis (true/false)\n- on_estrogen (true/false)\n- history_dvt_pe (true/false)\n- unilateral_leg_swelling (true/false)\n- recent_trauma_or_surgery (true/false)\n\nExample output:\n{\n  \"age\": 55,\n  \"heart_rate\": 110,\n  \"oxygen_saturation\": 94,\n  \"has_hemoptysis\": false,\n  \"on_estrogen\": true,\n  \"history_dvt_pe\": false,\n  \"unilateral_leg_swelling\": false,\n  \"recent_trauma_or_surgery\": true\n}"
  }
,
  "wells": {
    "sys_instruct": "You are a clinical decision support assistant.\n",
    "extract_entities": "Extract the following entities from the patient note and return ONLY a JSON object with these fields:\n- Previously Documented Pulmonary Embolism (true/false)\n- Heart Rate or Pulse (number, beats per minute)\n- Immobilization for at least 3 days (true/false)\n- Hemoptysis (true/false)\n- Surgery in the previous 4 weeks (true/false)\n- Malignancy with treatment within 6 months or palliative (true/false)\n- Pulmonary Embolism is #1 diagnosis OR equally likely (true/false)\n- Previously documented Deep Vein Thrombosis (true/false)\n\nExample output:\n{\n  \"Previously Documented Pulmonary Embolism\": false,\n  \"Heart Rate or Pulse\": 78,\n  \"Immobilization for at least 3 days\": false,\n  \"Hemoptysis\": false,\n  \"Surgery in the previous 4 weeks\": false,\n  \"Malignancy with treatment within 6 months or palliative\": false,\n  \"Pulmonary Embolism is #1 diagnosis OR equally likely\": false,\n  \"Previously documented Deep Vein Thrombosis\": false\n}",
    "enhanced_prompt": "Calculate the Wells score for pulmonary embolism (PE) for this patient. Explain how each criterion applies using the patient note and extracted entities, then return the result in the specified JSON format.\n\nWells Criteria:\n1. Clinical signs and symptoms of DVT (3.0 points)\n2. PE more likely than alternative diagnosis (3.0 points)\n3. Heart rate > 100 bpm (1.5 points)\n4. Immobilization ≥ 3 days or surgery within 4 weeks (1.5 points)\n5. Previous DVT or PE (1.5 points)\n6. Hemoptysis (1.0 point)\n7. Malignancy (on treatment, treated in last 6 months, or palliative) (1.0 point)\n\nInterpretation:\n- > 6.0 = High probability of PE\n- 2.0 – 6.0 = Moderate probability of PE\n- < 2.0 = Low probability of PE\n\nIf data for any criterion is missing or not explicitly mentioned, assume it is not present (0 points).\n\nFirst, provide a detailed explanation of how each criterion applies. Then return the result in this JSON format:\n\n{\n  \"Explanation\": \"<Concise summary explaining evaluation of each criterion>\",\n  \"Criteria\": {\n    \"Clinical signs of DVT\": 0 or 3,\n    \"PE more likely than alternatives\": 0 or 3,\n    \"HR > 100\": 0 or 1.5,\n    \"Recent immobilization or surgery\": 0 or 1.5,\n    \"Previous DVT or PE\": 0 or 1.5,\n    \"Hemoptysis\": 0 or 1,\n    \"Malignancy\": 0 or 1\n  },\n  \"Answer\": <numeric total score>,\n  \"Interpretation\": \"Low / Moderate / High probability\"\n}"
  }
  ,
  "creatinine_clearance": {
  "sys_instruct": "You are a clinical decision support assistant.\n",
  "extract_entities": "Extract the following entities from the patient note and return ONLY a JSON object with these fields:\n- sex (\"Male\" or \"Female\")\n- age (number, years)\n- weight (number, kg)\n- creatinine (number, mg/dL)\n\nExample output:\n{\n  \"sex\": \"Male\",\n  \"age\": 83,\n  \"weight\": 67.2,\n  \"creatinine\": 1.4\n}",
  "enhanced_prompt": "Calculate the estimated Creatinine Clearance (CrCl) using the Cockcroft–Gault Equation for this patient. Use the extracted entities and explain the calculation step by step.\n\nCockcroft–Gault formula:\nCrCl (mL/min) = [(140 – age in years) × weight in kg] / (72 × serum creatinine in mg/dL)\nFor females, multiply the result by 0.85.\n\nIf any required data is missing, state that the calculation cannot be completed.\n\nFirst, provide a clear explanation of how the calculation is performed with the given values. Then return the result in this JSON format:\n\n{\n  \"Explanation\": \"<Concise step-by-step explanation of the calculation>\",\n  \"Criteria\": {\n    \"Age\": <number>,\n    \"Weight (kg)\": <number>,\n    \"Serum Creatinine (mg/dL)\": <number>,\n    \"Sex\": \"Male\" or \"Female\"\n  },\n  \"Answer\": <numeric CrCl value in mL/min>,\n  \"Interpretation\": \"Estimated Creatinine Clearance: <value> mL/min\"\n}"
}
}
